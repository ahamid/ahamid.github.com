
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Python 2.4 and cookies - Devoured By Lions</title>
  <meta name="author" content="aaron">

  
  <meta name="description" content="Everytime I start liking Python&#8230;there has to be a downer.451 raise CookieError(&#8220;Attempt to set a reserved key: %s&#8221; % key)452 if &# &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ahamid.github.com/blog/2009/02/05/Python-2.4-and-cookies">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Devoured By Lions" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Devoured By Lions</a></h1>
  
    <h2>the eternal struggle to tame complexity</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ahamid.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Python 2.4 and Cookies</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-02-05T22:54:00-05:00" pubdate data-updated="true">Feb 5<span>th</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content">Everytime I start liking Python&#8230;there has to be a downer.<br /><br /><blockquote><br />451             raise CookieError(&#8220;Attempt to set a reserved key: %s&#8221; % key)<br />452         if &#8220;&#8221; != translate(key, idmap, LegalChars):<br />453             raise CookieError(&#8220;Illegal key value: %s&#8221; % key)<br />454 <br />455         # It&#8217;s a good key, so save it.<br />global CookieError = <class Cookie.CookieError>, key = &#8216;ABC:123.123.123.123:XYZ&#8217;<br />CookieError: Illegal key value: ABC:123.123.123.123:XYZ <br />      args = (&#8216;Illegal key value: ABC:123.123.123.123:XYZ&#8217;,)</blockquote><br /><br />Really?  Apparently Python&#8217;s (at least the cruddy version I&#8217;m stuck with in RHEL 5) Cookie implementation is rather strict in the headers it will accept and will just blow up if there are characters that are not in the RFC.  <br /><br /><a href="http://markmail.org/message/bsabuonsslb4ybiz">http://markmail.org/message/bsabuonsslb4ybiz</a><br /><br />While I generally would agree that the implementation conform to the spec and indicate when the input is non-standard, I think just blowing up is rather harsh.  There have to be garbage cookies floating around there on the web.  Unfortunately this one is related to the single sign on system in front of my app.  So there are two fails here.<br /><br />So I guess I&#8217;m left to figure out a way to kill this cookie before Python sees it&#8230;most likely I&#8217;ll have to implement this as a mysterious hack in the config of the Apache instance that frontends it.  Unless I can sneak it into some WSGI layer.  But I&#8217;ll probably just hack it because my life and patience are finite.
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">aaron</span></span>

      








  


<time datetime="2009-02-05T22:54:00-05:00" pubdate data-updated="true">Feb 5<span>th</span>, 2009</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://ahamid.github.com/blog/2009/02/05/Python-2.4-and-cookies/" data-via="_aaron_" data-counturl="http://ahamid.github.com/blog/2009/02/05/Python-2.4-and-cookies/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
      
        <a class="basic-alignment right" href="/blog/2009/02/14/Apache-configuration/" title="next Post: Apache configuration">Apache configuration &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2011/12/30/hello-octopress-world/">hello octopress world</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/07/22/Latest-Capybara-and-Selenium/">Latest Capybara and Selenium</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/10/Monads-in-Java/">Monads in Java</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/10/Increasing-processes%2C-sessions-and-transactions-in-Oracle-XE/">Increasing processes, sessions and transactions in Oracle XE</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/05/01/The-Curiously-Recurring-Installation-Pattern%2A/">The Curiously Recurring Installation Pattern*</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("_aaron_", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/_aaron_" class="twitter-follow-button" data-show-count="false">Follow @_aaron_</a>
  
</section>


<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/ahamid">@ahamid</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'ahamid',
            count: 10,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - aaron -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
